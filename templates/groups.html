<head>
    <title>Wichtler 3000</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function createGroup(data) {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "POST", "/groups/create", true );
            xmlHttp.send( JSON.stringify( {
                    "name":form.name,
                    "password":form.password
                })
            );
            window.location = "/groups/"+data.name;
        }
        function joinGroup(data) {
            console.log(data);
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "POST", "/groups/create", true );
            xmlHttp.send( JSON.stringify( {
                    "name":data.name,
                    "password":data.password
                })
            );
            window.location = "/groups/"+groupName;
        }
    </script>
</head>
<body>
    <a href="/">Homepage</a><br>
    {{ message }}

    {% if groups and groups|length > 0 %}
    <p>You are in the following groups: {{ ", ".join(groups) }}</p>
    <table id="groupsTable">
        <tr>
            <th>Group Name</th>
            <th>Show Group</th>
        </tr>
        {% for group in groups %}
        <tr>
            <td>{{ group }}</td>
            <td><button
                    type="submit"
                    class="btn btn-success"
                    onclick="window.location='/groups/{{group}}'"
            >Show</button></td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}

    <!-- create group -->
    <form action="javascript:createGroup(this)">
        <p><input type=text name=name placeholder="group to create"></p>
        <p><input type=password name=password placeholder="group password"></p>
        <p><input type=submit value=Create></p>
    </form>

    <!-- join group -->
    <form action="javascript:joinGroup(this)">
        <p><input type=text name=name placeholder="group to join"></p>
        <p><input type=password name=password placeholder="group password"></p>
        <p><input type=submit value=Join></p>
    </form>
</body>